import React, { useState } from 'react'
import dynamic from 'next/dynamic'
import ProblemPageLayout from '../components/ProblemPageLayout'
import ProblemSection from '../components/ProblemSection'
import { getSEOData } from '../utils/seoConfig'
import { getProblemPageStructuredData } from '../utils/structuredData'

const OrderModal = dynamic(() => import('../components/OrderModal'), { ssr: false, loading: () => null })

const Page = () => {
  const [isModalOpen, setIsModalOpen] = useState(false)
  const openModal = () => setIsModalOpen(true)
  const closeModal = () => setIsModalOpen(false)

  const seoData = getSEOData('/neotjimaet')
  const baseUrl = 'https://sosamba3.vercel.app'
  const structuredData = getProblemPageStructuredData(
    'Ремонт стиральной машины которая не отжимает',
    'Профессиональный ремонт стиральных машин которые не отжимают белье в Одессе. Ремонт двигателя, замена щеток.',
    `${baseUrl}/neotjimaet`
  )

  const seo = {
    title: seoData.title,
    description: seoData.description,
    keywords: seoData.keywords,
    canonical: `${baseUrl}/neotjimaet`,
    structuredData,
  }

  const title = `<span class="page-text11">Стиральная машина не отжимает —</span><span class="page-text12"> </span><span class="page-text13">что делать</span>`

  const anchors = {
    title: 'Стиральная машина не отжимает:',
    items: [
      { icon: '/external/vector8669-r6fr.svg', href: '#1', text: 'Что делать, если машина не отжимает' },
      { icon: '/vector.svg', href: '#2', text: 'Основные причины поломки:' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2', text: '1. Неисправен сливной насос (помпа)' },
      { icon: '/external/vector8669-r6fr.svg', href: '#3', text: '2. Неисправен прессостат (датчик уровня воды)' },
      { icon: '/external/vector8669-r6fr.svg', href: '#4', text: '3. Изношенные щетки двигателя' },
      { icon: '/external/vector8669-r6fr.svg', href: '#5', text: '4. Растянутый или порвавшийся приводной ремень' },
      { icon: '/external/vector8669-r6fr.svg', href: '#5-1', text: '5. Неисправность двигателя' },
      { icon: '/external/vector8669-r6fr.svg', href: '#5-2', text: '6. Поломка таходатчика (датчика оборотов)' },
    ],
  }

  const navigation = {
    prevPage: { href: '/zavisaetnaprogramme', title: 'Стиральная машина зависает на программе' },
    nextPage: { href: '/nenabiraetvodu', title: 'Стиральная машина не набирает воду' },
  }

  const sections = [
    {
      id: '1',
      title: 'Что делать, если машина не отжимает:',
      image: '/7/1s.webp',
      imageAlt: 'мокрая рубашка',
      imageCaption: 'мокрое белье',
      content: `<p><strong>1. Для начала проверьте сливной фильтр.</strong><br/>Он удерживает мелкие предметы — монеты, пуговицы, ворсинки — и со временем забивается. Когда фильтр перекрыт, вода не проходит в насос, и программа отжима не запускается. Обычно фильтр находится внизу на передней панели: откройте лючок, выкрутите пробку и удалите скопившийся мусор. После очистки попробуйте снова включить стирку.</p>
        <p><strong>2. Если фильтр в порядке, обратите внимание на сливной шланг.</strong><br/>Он не должен быть перегнут или зажат мебелью. Изгибы мешают свободному стоку воды, и машина также отказывается переходить к отжиму. Осмотрите шланг по всей длине, расправьте петли и проверьте соединение с канализацией или сифоном. При необходимости очистите засор в сифоне или замените шланг.</p>
        <p><strong>3. Ещё одна распространенная причина — неверные настройки.</strong><br/>Убедитесь, что вы не выбрали режим без отжима. В некоторых программах скорость вращения барабана снижена или отжим отключён полностью, чтобы не повредить ткань. Если это так, перезапустите стирку с нужным режимом.</p>
        <p><strong>4. Иногда проблема связана с загрузкой белья.</strong><br/>Если вещи сбились в комок, барабан не может сбалансироваться. Датчик дисбаланса блокирует разгон. Перетряхните бельё, добавьте мелкие вещи или разделите большую партию на две стирки.</p>
        <p><strong>5. Если всё это не помогло, попробуйте перезагрузить электронику.</strong><br/>Выключите стиральную машину из розетки на 10–15 минут, затем включите снова и запустите короткий цикл — иногда этого достаточно, чтобы сбросить сбой.</p>
        <p><strong>6. Если после всех проверок отжим не запускается, вероятна неисправность насоса, датчиков или модуля управления.</strong></p>`
    },
    {
      id: '2',
      title: '1. Неисправен сливной насос (помпа)',
      image: '/1/slivanasos.webp',
      imageAlt: 'сливной насос',
      imageCaption: 'Сливной насос',
      content: `<p>Если помпа сгорела или в ней сломана крыльчатка, машина не сможет слить воду и переход к отжиму невозможен. Признаки: вода остаётся в баке, машинка гудит во время слива или совсем молчит, и часто появляется ошибка слива на дисплее. Самостоятельный ремонт насоса обычно невозможен.</p>`
    },
    {
      id: '3',
      title: '2. Неисправен прессостат (датчик уровня воды)',
      image: '/2/presso.webp',
      imageAlt: 'прессостат',
      imageCaption: 'прессостат',
      content: `<p>Если датчик неправильно определяет уровень воды, блок управления не срабатывает нормально. При этом машинка может «зависать» перед отжимом – она не сливает воду полностью и аварийно останавливается. Признаки: после завершения стирки в баке остаётся вода, могут появляться ошибки уровня воды. Решается замена прессостата.</p>`
    },
    {
      id: '4',
      title: '3. Изношенные щетки двигателя',
      image: '/5/image%203823055-900w.webp',
      imageAlt: 'щетки двигателя',
      imageCaption: 'Щетки двигателя',
      content: `<p>Изношенные щетки двигателя. В большинстве машин двигатель имеет угольные щётки, которые со временем стираются. Из-за плохого контакта мотор не набирает обороты и искрит. Вы заметите искрение внутри корпуса и ощущение, что барабан «лениво» пытается крутиться, но не раскручивается. Если вовремя не заменить щетки, двигатель может вообще перестать вращать барабан.</p>`
    },
    {
      id: '5',
      title: '4. Растянутый или порвавшийся приводной ремень',
      image: '/10/image%2038230551-800h.webp',
      imageAlt: 'ремень',
      imageCaption: 'Соскочивший ремень',
      content: `<p>Приводной ремень передаёт вращение от двигателя к барабану. При ослаблении или разрыве ремня барабан не сможет достичь нужных оборотов и бельё останется сырым. Обычно при этом двигатель пытается работать (машинка гудит), но барабан остаётся вялым или не вращается вовсе. Если ремень слетел, его можно перекинуть на место (для этого снимают заднюю стенку и ослабляют крепление мотора). Если же ремень изношен, потребуется его замена. Причиной разрыва может быть старение ремня или износ подшипников (при сильных люфтах на валу ремень перекидывается и рвётся.</p>`
    },
    {
      id: '5-1',
      title: '5. Неисправность двигателя',
      image: '/10/12345.webp',
      imageAlt: 'двигатель',
      imageCaption: 'Двигатель',
      content: `<p>Полный отказ мотора (обрыв обмоток или короткое замыкание) – серьезная проблема. Признак – при отжиме машина «зависает», двигатель гудит или совсем тих, а барабан не крутится. Могут выбиваться пробки электрической цепи. Ремонт двигателя – трудоёмкая операция, обычно его заменяют.</p>`
    },
    {
      id: '5-2',
      title: '6. Поломка таходатчика (датчика оборотов)',
      image: '/7/6s.webp',
      imageAlt: 'датчик оборотов',
      imageCaption: 'Датчик оборотов',
      content: `<p>Если датчик оборотов выдаёт неверные показания, контроллер перестаёт доверять двигателю – стиральная машина может просто не давать команду на отжим. Это происходит без явных механических шумов, но при этом барабан либо вращается очень медленно, либо вообще не двигается. Решается заменой датчика.</p>`
    },
  ]

  return (
    <>
      <ProblemPageLayout
        seo={seo}
        title={title}
        anchors={anchors}
        navigation={navigation}
        onOrderClick={openModal}
      >
        {sections.filter(s => s.id === '1').map(s => (<ProblemSection key={s.id} {...s} />))}
        <div className="page-container15"><h2 className="page-text34"><span>Основные причины поломки:</span></h2></div>
        {sections.filter(s => s.id !== '1').map((s) => (<ProblemSection key={s.id} {...s} />))}
      </ProblemPageLayout>

      <OrderModal isOpen={isModalOpen} onClose={closeModal} />
    </>
  )
}

export default Page
