import React, { useState } from 'react'
import dynamic from 'next/dynamic'
import ProblemPageLayout from '../components/ProblemPageLayout'
import ProblemSection from '../components/ProblemSection'
import { getSEOData } from '../utils/seoConfig'
import { getProblemPageStructuredData } from '../utils/structuredData'

const OrderModal = dynamic(() => import('../components/OrderModal'), { ssr: false, loading: () => null })

const Page = () => {
  const [isModalOpen, setIsModalOpen] = useState(false)
  const openModal = () => setIsModalOpen(true)
  const closeModal = () => setIsModalOpen(false)

  const seoData = getSEOData('/neslivaetvodu')
  const baseUrl = 'https://sosamba3.vercel.app'
  const structuredData = getProblemPageStructuredData(
    'Ремонт стиральной машины которая не сливает воду',
    'Профессиональный ремонт стиральных машин которые не сливают воду в Одессе. Диагностика, чистка фильтров, ремонт насоса.',
    `${baseUrl}/neslivaetvodu`
  )

  const seo = {
    title: seoData.title,
    description: seoData.description,
    keywords: seoData.keywords,
    canonical: `${baseUrl}/neslivaetvodu`,
    structuredData,
  }

  const title = `<span class=\"page-text11\">Стиральная машина не сливает воду —</span><span class=\"page-text12\"> </span><span class=\"page-text13\">что делать?</span>`

  const anchors = {
    title: 'Основные причины отсутствия слива:',
    items: [
      { icon: '/external/vector8669-r6fr.svg', href: '#1', text: '1. Засор сливного фильтра' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2', text: '2. Неисправность датчика уровня воды (прессостата)' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2b', text: '3. Неисправность сливного насоса' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2c', text: '4. Сбой или поломка модуля управления' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2d', text: '5. Засор сливного патрубка' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2e', text: '6. Засор сливного шланга' },
      { icon: '/vector.svg', href: '#3', text: 'Как самостоятельно слить воду:' },
      { icon: '/vector.svg', href: '#4', text: 'Советы по профилактике:' },
    ],
  }

  const navigation = {
    prevPage: { href: '/nekrutitbaraban', title: 'Стиральная машина не крутит барабан' },
    nextPage: { href: '/negreetvodu', title: 'Стиральная машина не греет воду' },
  }

  const sections = [
    { id: '1', title: '1. Засор сливного фильтра', image: '/1/filtr.webp', imageAlt: 'засор сливного фильтра', imageCaption: 'Засор сливного фильтра', content: `<p>Сливной фильтр улавливает мелкие предметы и ворсинки, не давая им попасть в насос. Как правило, он находится в нижней части корпуса за откидной крышкой. Перед началом любых работ обязательно отключите машину от сети и подготовьте ёмкость для слива. Аккуратно открутите крышку фильтра против часовой стрелки – под ней немедленно начнёт вытекать вода.( см. как правильно сливать воду ) Как только в баке останется мало воды, сработает защёлка запорного механизма, и дверца разблокируется. После этого полностью вытащите фильтр и очистите его от скопившейся пыли, волос, монеток и других посторонних предметов. Собирая обратно, будьте осторожны: пластмассовый фильтр хрупкий. Если засор в фильтре был причиной проблемы, после его очистки вода будет свободно уходить, а люк должен открыться.</p>` },
    { id: '2', title: '2. Неисправность датчика уровня воды (прессостата)', image: '/2/presso.webp', imageAlt: 'прессостат', imageCaption: 'Прессостат', content: `<p>Современные машины контролируют уровень воды с помощью прессостата – герметичной ёмкости с трубкой и датчиком давления. Если прессостат сломан или его шланг оторвался, машина может ошибочно считать бак пустым и не подавать команду на слив. Обычно в этом случае машина останавливается с кодами ошибок RE или OE. Проблему иногда решают проверкой и прочисткой трубки прессостата, в более сложных случаях – заменой датчика.</p>` },
    { id: '2b', title: '3. Неисправность сливного насоса', image: '/1/slivanasos.webp', imageAlt: 'помпа', imageCaption: 'Сливной насос', content: `<p>Помпа откачивает воду из бака в канализацию. Под крышкой фильтра видна крыльчатка насоса – маленький винт, который вращается при сливе. Проверьте, легко ли он проворачивается вручную. Если крыльчатка заклинила из-за застрявшего предмета, или мотор совсем не вращается, насос не справится со сливом. Для проверки запустите короткий режим «Слив» или «Отжим» – при исправном насосе крыльчатка будет вращаться, и вы услышите её гул. Если помпа едва вращается или останавливается при небольшом нажатии (значит, износила ресурс), её нужно заменить. При поломке насоса вода не откачивается вообще, и дверца остаётся закрытой.</p>` },
    { id: '2c', title: '4. Сбой или поломка модуля управления', image: '/1/plata.webp', imageAlt: 'модуль управления', imageCaption: 'Модуль управления', content: `<p>Электронная плата (модуль управления) посылает команды насосу при окончании цикла стирки. Если плата неисправна или «зависает», она может не запустить сливной насос и не разблокировать люк. При подозрении на сбой электроники нужна диагностика специалиста: плату обычно вынимают для тестирования. Возможные причины – перегоревшие микросхемы, сбой прошивки или окисление контактов. Это самая сложная поломка, которую сложно устранить самостоятельно.</p>` },
    { id: '2d', title: '5. Засор сливного патрубка', image: '/1/patrubok.webp', imageAlt: 'патрубок', imageCaption: 'Сливной патрубок', content: `<p>Сливной патрубок (гофра) соединяет бак с насосом. Даже после чистки фильтра вода может не уходить, если в этом патрубке что-то застряло. Чаще всего внутрь попадают монеты, пуговицы, обрывки ткани – они могут периодически перекрывать проток воды.Чтобы проверить патрубок, отключите машину, уложите её на бок и снимите заднюю или нижнюю панель. Далее отсоедините патрубок от насоса: внутри часто обнаруживаются мелкие тряпочки, носки и мелкие детали. Удалите из патрубка мусор. После сборки проверьте слив – при отсутствии засора вода должна свободно уходить.</p>` },
    { id: '2e', title: '6. Засор сливного шланга', image: '/1/shlang.webp', imageAlt: 'шланг', imageCaption: 'Сливной шланг', content: `<p>Гибкий сливной шланг идёт от насоса к стояку канализации. Важно убедиться, что он не пережат и не забит грязью или жиром, особенно в местах изгибов и подсоединения к раковине или сифону. Для проверки отсоедините шланг от канализации и попробуйте продуть его: при чистом шланге воздух проходит легко и слышно, как булькает оставшаяся вода. Если шланг забит, протолкните внутрь гибкую проволоку или промойте его под струёй горячей воды. После прочистки установите шланг на место и убедитесь, что он нигде не перегибается и надёжно закреплён.</p>` },
    { id: '3', title: '7. Как самостоятельно слить воду?', image: '/1/bludechko.webp', imageAlt: 'блюдечко', imageCaption: 'Подготовка к аварийному сливу', content: `<p><strong>1.</strong> Отключите питание. Выньте вилку из розетки — это обязательная мера безопасности. <br/><strong>2.</strong> Подготовьте тряпки и низкую ёмкость. Возьмите тряпки или старые полотенца и плоскую невысокую ёмкость (таз, миску или лоток). Если можно — отведите сливной шланг в душевую/ванну; иначе собирайте воду в ёмкость и переносите.<br/><strong>3.</strong> Дайте воде остыть. Если стирка была недавно, дождитесь остывания. Оцените температуру по стеклу люка: если оно горячее — подождите. <br/><strong>4.</strong> Откройте доступ к фильтру. Он внизу спереди за крышкой. Подставьте плоскую ёмкость и аккуратно приоткрутите пробку для слива. <br/><strong>5.</strong> Наклоните машинку назад. Так остатки быстрее стекают к фильтру. Делайте это вдвоём — техника тяжёлая. <br/><strong>6.</strong> Очистите фильтр и установите обратно. Когда вода выйдет, выкрутите фильтр до конца, удалите мусор, промойте и установите обратно.</p>` },
    { id: '4', title: '8. Советы по профилактике', image: null, imageAlt: '', imageCaption: '', content: `<p><strong>1.</strong> Регулярно очищайте фильтр. Чистый фильтр предотвращает заторы из ворса и мелкого мусора. <br/><strong>2.</strong> Проверяйте карманы и не допускайте мелкие предметы. Проверяйте карманы одежды перед стиркой: монеты, заколки, платки и т.п. могут попасть в патрубок. <br/><strong>3.</strong> Следите, чтобы шланг не перегибался, и ставьте машинку ровно. Шланг не должен перегибаться или пережиматься. Оптимальная высота вывода — до 50 см от уровня пола. Ставьте машинку ровно и снижайте вибрации, чтобы не перетирались провода и не ослабевали патрубки. <br/><strong>4.</strong> Следите за канализацией и сифоном. Убедитесь, что стояк или сифон не засорены. Если из раковины вода уходит медленно, стирочная может застаиваться. Периодически очищайте сантехнику.</p>` },
  ]

  return (
    <>
      <ProblemPageLayout
        seo={seo}
        title={title}
        anchors={anchors}
        navigation={navigation}
        onOrderClick={openModal}
      >
        {sections.map((s) => (<ProblemSection key={s.id} {...s} />))}
      </ProblemPageLayout>

      <OrderModal isOpen={isModalOpen} onClose={closeModal} />
    </>
  )
}

export default Page
