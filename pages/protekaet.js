import React, { useState } from 'react'
import dynamic from 'next/dynamic'
import ProblemPageLayout from '../components/ProblemPageLayout'
import ProblemSection from '../components/ProblemSection'
import { getSEOData } from '../utils/seoConfig'
import { getProblemPageStructuredData } from '../utils/structuredData'

const OrderModal = dynamic(() => import('../components/OrderModal'), { ssr: false, loading: () => null })

const Page = () => {
  const [isModalOpen, setIsModalOpen] = useState(false)
  const openModal = () => setIsModalOpen(true)
  const closeModal = () => setIsModalOpen(false)

  const seoData = getSEOData('/protekaet')
  const baseUrl = 'https://sosamba3.vercel.app'
  const structuredData = getProblemPageStructuredData(
    'Ремонт протекающей стиральной машины',
    'Профессиональный ремонт протекающих стиральных машин в Одессе. Устранение течи, замена уплотнителей.',
    `${baseUrl}/protekaet`
  )

  const seo = {
    title: seoData.title,
    description: seoData.description,
    keywords: seoData.keywords,
    canonical: `${baseUrl}/protekaet`,
    structuredData,
  }

  const title = `<span class="page-text11">Стиральная машина протекает —</span><span class="page-text12"> </span><span class="page-text13">что делать?</span>`

  const anchors = {
    title: 'Стиральная машина протекает:',
    items: [
      { icon: '/external/vector8669-r6fr.svg', href: '#2', text: '1. Повреждение заливного или сливного шланга' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2-1', text: '2. Течь из контейнера для порошка' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2-2', text: '3. Повреждение или пробой бака' },
      { icon: '/external/vector8669-r6fr.svg', href: '#3', text: '4. Износ сальника подшипника.' },
      { icon: '/external/vector8669-r6fr.svg', href: '#4', text: '5. Разгерметизация внутренних патрубков' },
      { icon: '/vector.svg', href: '#5', text: 'Как не допустить протечку' },
    ],
  }

  const navigation = {
    prevPage: { href: '/negreetvodu', title: 'Стиральная машина не греет воду' },
    nextPage: { href: '/silnoshumit', title: 'Стиральная машина шумит при отжиме' },
  }

  const sections = [
    {
      id: '2',
      title: '1. Повреждение заливного или сливного шланга',
      image: '/3/slivnoyshlang.webp',
      imageAlt: 'заливной шланг',
      imageCaption: 'Сливной шланг',
      content: `<p>Шланги, подводящие воду к машине и отводящие её в канализацию, сильно подвержены механическим повреждениям. Например, если стиральную машину двигали или при транспортировке не убрали транспортировочные крепления, шланг мог надорваться или отстегнуться. На старых машинках резиновый сливной шланг может рассохнуться и трескаться. В последнем случае воду видно под машиной во время слива – она капает снизу или из самого шланга.Совет: иногда проблему решает подзатягивание хомута на соединении шланга с насосом или патрубком. Если же шланг порван или прогрызен (иногда кошки любят погрызть упругую резину), лучше сразу заменить его новым – это недорогая мера, а эффект очень заметен. Аналогично проверьте шланг подачи воды: при сильных изгибах и перегибах он также может пропускать. Меняйте старые шланги примерно раз в пять–семь лет и при малейших признаках протечки меняйте крепления.</p>`
    },
    {
      id: '2-1',
      title: '2. Течь из контейнера для порошка',
      image: '/3/1c.webp',
      imageAlt: 'контейнер для порошка',
      imageCaption: 'Контейнер для порошка',
      content: `<p>Если после набора воды заметили под стиралкой воду в районе лотка для порошка, причиной часто бывает его засор. Тогда часть воды «уползает» мимо и вытекает наружу. Иногда лоток просто трескается или расслаивается со временем – тогда вода тоже может уходить прямо через него.Совет: регулярно вынимайте и промывайте лоток для порошка и сам патрубок подачи воды в бак. Если давление в водопроводе слишком сильное, воду может «выдавить» наружу – попробуйте немного прикрыть кран подачи. Не используйте слишком много моющего средства и только предназначенные для машин порошки – избыток пены тоже выгоняет влагу наружу. При появлении лужи на полу во время набора воды стоит отключить машинку, собрать бельё и прочистить дозатор: обычно это быстро решает проблему.</p>`
    },
    {
      id: '2-2',
      title: '3. Повреждение или пробой бака',
      image: null,
      imageAlt: '',
      imageCaption: '',
      content: `<p>Наиболее серьёзная причина – это нарушение целостности самого бака (емкости) машины. Внутри может образоваться дырка из-за мелких острых предметов – чаще всего стальных косточек от бюстгальтера, проскочивших в барабан. Такие пробоины вызывают неконтролируемый «фонтан»: вода течёт непрерывно и из-под машины в любых режимах. Иногда бак трескается по шву или по износу деформируется, что тоже даёт течь.Совет: к сожалению, отремонтировать корпус бака почти невозможно – его обычно заменяют целиком или вместе с барабаном. Чтобы не допустить такого сбоя, тщательно проверяйте и чистите внутренние карманы у белья. Раз в месяц запускайте режим самоочистки с пустым барабаном (если есть) или используйте специальные средства против накипи и загрязнений. Это уменьшит накопление частиц внутри бака и продлит его ресурс.</p>`
    },
    {
      id: '3',
      title: '4. Износ сальника подшипника.',
      image: '/3/salnik.webp',
      imageAlt: 'сальник стиральной машины',
      imageCaption: 'Сальник стиральной машины',
      content: `<p>В некоторых случаях вода под машиной появляется только во время отжима – это характерно для износа подшипников и сальника барабана. Сальник (уплотнитель) насоса вращения постепенно истирается, из-за чего вода попадает внутрь подшипников и выходит наружу. Сначала заметно лишь учащённое включение помпы аквастопа (если он есть), а потом – ржавая или с маслянистыми пятнами вода снизу. При этом машина громко гремит и «гуляет» на отжиме.Совет: осмотреть это своими силами можно только сняв заднюю панель, но замена подшипников – задача мастера: приходится разбирать весь бак. Если вы слышите новые скрежет и вибрацию в сочетании с лужей под стиралкой, лучше как можно скорее вызвать специалиста. Регулярное использование специальных очистителей и держание машины в ровном положении может чуть замедлить износ, но окончательно устранить течь сможет только замена сальника и подшипников.</p>`
    },
    {
      id: '4',
      title: '5. Разгерметизация внутренних патрубков',
      image: '/3/patruboksfonom.webp',
      imageAlt: 'патрубок',
      imageCaption: 'Патрубок',
      content: `<p>Внутри машины по-прежнему течёт вода – и это легко заметить по лужице под ней при заливе. К аварийным патрубкам относятся труба от лотка дозатора к баку и любые трубочки между баком, насосом и фильтром. Со временем соединения этих патрубков ослабевают от постоянной вибрации, а сами трубки могут забиваться засохшей грязью и мелкими крошками порошка. Засорённая или неплотно подсоединённая труба начинает пропускать воду на стыках, которая капает в поддон или сразу на пол.</p>`
    },
    {
      id: '5',
      title: 'Как не допустить протечку',
      image: null,
      imageAlt: '',
      imageCaption: '',
      content: `<p><strong>1. Проверяйте карманы и бережно укладывайте бельё.</strong> Мелкие детали одежды – пуговицы, заклёпки, монеты – кладите в стиральные мешки.</p>
      <p><strong>2. Регулярно очищайте дозатор и фильтр.</strong> Снимайте и промывайте лоток для порошка, промывайте мелкий сливной фильтр на передней панели.</p>
      <p><strong>3. Следите за шлангами и патрубками.</strong> Убедитесь, что они хорошо закреплены и не имеют видимых повреждений. Меняйте шланги каждые несколько лет или при первых признаках износа.</p>
      <p><strong>4. Держите манжету дверцы чистой.</strong> Протирайте её после стирки, удаляя остатки моющих средств и ворса. Осматривайте манжету на предмет трещин и сразу меняйте при необходимости.</p>
      <p><strong>5. Обеспечьте прочную установку машины.</strong> Стиральная машина должна стоять строго по уровню: если она «гуляет», вибрации ускоряют износ деталей. Регулируйте ножки так, чтобы машина была неподвижна при работе.</p>
      <p><strong>6. Не перегружайте барабан.</strong> Переполнение бельем нарушает баланс и увеличивает нагрузку на уплотнители и подшипники. Загружайте ровно столько, сколько рекомендует производитель.</p>
      <p><strong>7. Проверяйте напор воды и фильтры водопровода.</strong> Слишком сильный напор может выдавить воду через дозатор. Установите редуктор давления при необходимости и чистите сетчатый фильтр на входном шланге.</p>`
    },
  ]

  return (
    <>
      <ProblemPageLayout
        seo={seo}
        title={title}
        anchors={anchors}
        navigation={navigation}
        onOrderClick={openModal}
      >
        {sections.map((s) => (
          <ProblemSection key={s.id} {...s} />
        ))}
      </ProblemPageLayout>

      <OrderModal isOpen={isModalOpen} onClose={closeModal} />
    </>
  )
}

export default Page
