import React, { useState } from 'react'
import dynamic from 'next/dynamic'
import ProblemPageLayout from '../components/ProblemPageLayout'
import ProblemSection from '../components/ProblemSection'
import { getSEOData } from '../utils/seoConfig'
import { getProblemPageStructuredData } from '../utils/structuredData'

const OrderModal = dynamic(() => import('../components/OrderModal'), { ssr: false, loading: () => null })

const Page = () => {
  const [isModalOpen, setIsModalOpen] = useState(false)
  const openModal = () => setIsModalOpen(true)
  const closeModal = () => setIsModalOpen(false)

  const seoData = getSEOData('/nenabiraetvodu')
  const baseUrl = 'https://sosamba3.vercel.app'
  const structuredData = getProblemPageStructuredData(
    'Ремонт стиральной машины которая не набирает воду',
    'Профессиональный ремонт стиральных машин которые не набирают воду в Одессе. Чистка фильтров, ремонт клапанов.',
    `${baseUrl}/nenabiraetvodu`
  )

  const seo = {
    title: seoData.title,
    description: seoData.description,
    keywords: seoData.keywords,
    canonical: `${baseUrl}/nenabiraetvodu`,
    structuredData,
  }

  const title = `<span class="page-text11">Стиральная машина не набирает воду —</span><span class="page-text12"> </span><span class="page-text13">что делать?</span>`

  const anchors = {
    title: 'Стиральная машина не набирает воду:',
    items: [
      { icon: '/external/vector8669-r6fr.svg', href: '#1', text: 'Что делать, если машина не набирает воду?' },
      { icon: '/vector.svg', href: '#2', text: 'Основные причины поломки:' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2', text: '1. Закрыт кран подачи воды / Низкое давление' },
      { icon: '/external/vector8669-r6fr.svg', href: '#3', text: '2. Повреждён замок дверцы (блокировка люка).' },
      { icon: '/external/vector8669-r6fr.svg', href: '#4', text: '3. Пережат или перекручен заливной шланг' },
      { icon: '/external/vector8669-r6fr.svg', href: '#5', text: '4. Неисправен впускной клапан' },
      { icon: '/external/vector8669-r6fr.svg', href: '#5-1', text: '5. Неисправность датчика уровня воды (прессостат)' },
      { icon: '/external/vector8669-r6fr.svg', href: '#5-2', text: '6. Повреждён модуль управления' },
    ],
  }

  const navigation = {
    prevPage: { href: '/neotjimaet', title: 'Стиральная машина не отжимает' },
    nextPage: { href: '/neotkrivaetsadverca', title: 'У стиральной машины не открывается дверца' },
  }

  const sections = [
    {
      id: '1',
      title: 'Что делать, если машина не набирает воду:',
      image: null,
      imageAlt: '',
      imageCaption: '',
      content: `<p><strong>1. Выключите питание и закройте кран.</strong><br/>Прежде чем проверять узлы машины, отключите её от электросети и перекройте подачу воды. Так вы обезопасите себя и технику.</p>
        <p><strong>2. Проверьте кран и напор.</strong><br/>Откройте кран на полную мощность и оцените напор. Если воды нет в кране, позвоните в коммунальную службу. Если вентиль был закрыт, полностью его откройте.</p>
        <p><strong>3. Осмотрите заливной шланг.</strong><br/>Убедитесь, что на шланг ничего не давит и нет перегибов. Открутите его от машины (не забудьте поставить под него таз) и проверьте, идёт ли из него вода. Если шланг пережат или перекручен, распрямите его или замените.</p>
        <p><strong>4. Очистите сетчатый фильтр.</strong><br/>Перекройте воду, аккуратно открутите шланг у машины и достаньте сеточку-фильтр. Промойте её от загрязнений под сильной струёй или почистите щёткой. Соберите всё обратно.</p>
        <p><strong>5. Проверьте дверцу.</strong><br/>Убедитесь, что люк закрывается плотно и фиксируется. Если бельё мешает закрытию — правильно уложите вещи. Машина не начнёт залив, пока замок не сработает.</p>
        <p><strong>6. Перезагрузите машину.</strong><br/>Иногда помогает простой сброс: отключите СМА от сети на 10–15 минут, затем включите заново. Это снимает случайные ошибки блока управления.</p>`
    },
    {
      id: '2',
      title: '1. Закрыт кран подачи воды / низкое давление',
      image: '/8/image 3823050.webp',
      imageAlt: 'кран подачи воды',
      imageCaption: 'Кран подачи воды',
      content: `<p>Водяной кран – это вентиль на трубе, подающей воду к машинке. Если он закрыт или напор воды очень слабый, вода в машину просто не поступает. Признак такой неисправности: машина пытается начать работу (гудит), но вода не набирается или идёт очень медленно. Убедитесь, что вентиль полностью открыт (ручка параллельна трубе).Если напор в кране слабый, попробуйте подождать стабилизации давления или сообщить об этом в ЖКХ. Если кран сломан или не держит герметичность, вызовите сантехника или мастера.</p>`
    },
    {
      id: '3',
      title: '2. Повреждён замок дверцы (блокировка люка).',
      image: '/5/ubl.webp',
      imageAlt: 'УБЛ',
      imageCaption: 'УБЛ',
      content: `<p>Устройство блокировки люка (УБЛ) фиксирует дверцу перед стартом. Если оно изношено или сломано, дверца не закрывается плотно и стирка не начнётся. Симптом: машинка не запускается вообще, люк может остаться незаблокированным, часто загорается ошибка. Проверьте, плотно ли закрывается люк – он должен щёлкать. Если замок не срабатывает, машина «гудит», но воды не набирается. Осмотрите уплотнитель и корпус замка: при деформации или поломке нужен мастер.</p>`
    },
    {
      id: '4',
      title: '3. Пережат или перекручен заливной шланг',
      image: '/8/image 3823051.webp',
      imageAlt: 'заливной шланг',
      imageCaption: 'Заливной шланг',
      content: `<p>Заливной шланг – гибкая трубка от крана к машине. Он не должен быть перегибом, пережатием или смятием. Если на шланг наступили или он перекручен, вода не пойдёт. Симптом – машинка «жужжит», но залив не начинается. Остановите машину, отключите воду, осмотрите шланг. При обнаружении изгиба или зажима распрямите шланг и уберите препятствие. Если шланг повреждён (порван, сильно изношен), замените его.</p>`
    },
    {
      id: '5',
      title: '4. Неисправен впускной клапан',
      image: '/5/klapan.webp',
      imageAlt: 'впускной клапан',
      imageCaption: 'Впускной клапан',
      content: `<p>Впускной клапан – электромагнитный клапан внутри машины, который открывает и закрывает поток воды по команде платы. При его поломке клапан не открывается полностью и машина физически не может набрать нужное количество воды. Признаки: люк закрыт, машина включается, но вода не поступает или поступает очень мало, на дисплее может загореться код ошибки набора воды. Этот узел не подлежит ремонту — при подозрении на его поломку нужно вызвать мастера, который заменит клапан.</p>`
    },
    {
      id: '5-1',
      title: '5. Неисправность датчика уровня воды (прессостат)',
      image: '/2/presso.webp',
      imageAlt: 'Прессостат',
      imageCaption: 'Прессостат',
      content: `<p>Прессостат – датчик, определяющий уровень воды в баке. Если прессостат «залип» (считал бак полным) или вышел из строя, машина не начнёт залив воды вообще. Симптомы схожи с клапаном: люк блокируется, но залива нет, появляется ошибка «набор воды» или «прессостат» на дисплее. Иногда вода может сливаться сразу, создаётся ложная сигнализация об избыточном уровне. Пользователь может проверить шланг прессостата на засор (и прочистить его), но обычно требуется замена датчика.</p>`
    },
    {
      id: '5-2',
      title: '6. Повреждён модуль управления',
      image: '/image%203823045-900w.webp',
      imageAlt: 'Блок управления',
      imageCaption: 'Блок управления',
      content: `<p>Плата управления — «мозг» стиральной машины. Если она сбоит (из-за перепада напряжения или попадания влаги), команды на залив воды могут не передаваться. Признаки: после включения стирки машина блокирует люк, но воды не набирает, нередко выскакивает ошибка набора воды. Эта неисправность требует диагностики и ремонта.</p>`
    },
  ]

  return (
    <>
      <ProblemPageLayout
        seo={seo}
        title={title}
        anchors={anchors}
        navigation={navigation}
        onOrderClick={openModal}
      >
        {sections.filter(s => s.id === '1').map(s => (
          <ProblemSection key={s.id} {...s} />
        ))}
        <div className="page-container15"><h2 className="page-text34"><span>Основные причины поломки:</span></h2></div>
        {sections.filter(s => s.id !== '1').map((s) => (
          <ProblemSection key={s.id} {...s} />
        ))}
      </ProblemPageLayout>

      <OrderModal isOpen={isModalOpen} onClose={closeModal} />
    </>
  )
}

export default Page
