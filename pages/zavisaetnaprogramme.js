import React, { useState } from 'react'
import dynamic from 'next/dynamic'
import ProblemPageLayout from '../components/ProblemPageLayout'
import ProblemSection from '../components/ProblemSection'
import { getSEOData } from '../utils/seoConfig'
import { getProblemPageStructuredData } from '../utils/structuredData'

const OrderModal = dynamic(() => import('../components/OrderModal'), { ssr: false, loading: () => null })

const Page = () => {
  const [isModalOpen, setIsModalOpen] = useState(false)
  const openModal = () => setIsModalOpen(true)
  const closeModal = () => setIsModalOpen(false)

  const seoData = getSEOData('/zavisaetnaprogramme')
  const baseUrl = 'https://sosamba3.vercel.app'
  const structuredData = getProblemPageStructuredData(
    'Ремонт стиральной машины которая зависает на программе',
    'Профессиональный ремонт стиральных машин которые зависают на программах в Одессе. Ремонт модуля управления.',
    `${baseUrl}/zavisaetnaprogramme`
  )

  const seo = {
    title: seoData.title,
    description: seoData.description,
    keywords: seoData.keywords,
    canonical: `${baseUrl}/zavisaetnaprogramme`,
    structuredData,
  }

  const title = `<span class=\"page-text11\">Стиральная машина зависает на программе —</span><span class=\"page-text12\"> </span><span class=\"page-text13\">что делать?</span>`

  const anchors = {
    title: 'Стиральная машина зависает на программе:',
    items: [
      { icon: '/external/vector8669-r6fr.svg', href: '#1', text: 'Что делать, если стиральная машина зависает на программе' },
      { icon: '/vector.svg', href: '#2', text: 'Другие возможные причины:' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2', text: '1. Засор сливного фильтра' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2a', text: '2. Неплотно закрыт люк или неисправен замок' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2b', text: '3. Проблемы с отводом воды (насос, патрубок, шланг)' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2c', text: '4. Сбой электронного модуля управления' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2d', text: '5. Проблемы с датчиком уровня воды (прессостат)' },
      { icon: '/external/vector8669-r6fr.svg', href: '#2e', text: '6. Неисправность ТЭНа (нагревательного элемента)' },
    ],
  }

  const navigation = {
    prevPage: { href: '/nevkluchaetsa', title: 'Стиральная машина не включается' },
    nextPage: { href: '/neotjimaet', title: 'Стиральная машина не отжимает' },
  }

  const sectionsTop = [
    {
      id: '1',
      title: 'Что делать, если программа зависла:',
      image: null,
      imageAlt: '',
      imageCaption: '',
      content: `<p><strong>1. Попробуйте сбросить программу штатным способом.</strong><br/>Нажмите кнопку «Стоп» или «Пауза». В некоторых моделях есть отдельные режимы «Слив» или «Отжим» — выберите их и запустите на минимальных оборотах. Часто такой сброс помогает завершить цикл и вернуть управление.</p>
        <p><strong>2. Если сброс не сработал — обесточьте машинку.</strong><br/>Вытащите вилку из розетки или отключите питание автоматом в щитке. Так вы полностью снимете напряжение и исключите дальнейшие сбои.</p>
        <p><strong>3. Сделайте аварийный слив вручную (при необходимости).</strong><br/>Если вода не уходит при штатных попытках, подставьте под фильтр глубокую ёмкость. Открутите сливной фильтр против часовой стрелки. После откручивания вода пойдёт в ёмкость; слейте всю жидкость и уберите мусор из фильтра и отверстия. Такие действия помогают восстановить слив во многих случаях.</p>
        <p><strong>4. После ручного слива можно безопасно открыть люк.</strong><br/>Обычно дверца автоматически разблокируется после снятия напряжения, но если она осталась заблокированной, подождите несколько минут или разберите систему блокировки (иногда нужно подождать пока УБЛ «остынет»).</p>
        <p><strong>5. Перезапустите цикл.</strong><br/>Поставьте пустую машину на короткую программу «Отжим» или «Слив», чтобы убедиться, что вода больше не задерживается. Если техника запустилась и отработала нормально, проблема скорее всего решена.</p>`
    },
  ]

  const sectionsBottom = [
    {
      id: '2',
      title: '1. Засор сливного фильтра',
      image: '/1/filtr.webp',
      imageAlt: 'сливной фильтр',
      imageCaption: 'Сливной фильтр',
      content: `<p>Сливной фильтр — это сетчатый элемент на передней нижней части машины, который задерживает ворсинки, мелкий мусор и мелкие предметы при сливе. Если фильтр забит, вода не уходит из бака, бельё остается мокрым, а насос (помпа) не может откачать жидкость. Программа может «зависнуть» на этапе слива или отжима. Проверьте, не гудит ли насос без слива или не остаётся ли вода после цикла — это признаки засора. Проверьте фильтр. Удалите грязь и скопившийся мусор, промойте фильтр тёплой водой и закрутите обратно. Обычно эту процедуру можно выполнить самостоятельно (важно предварительно слить воду через фильтр или аварийный слив). Если после очистки фильтра машинка снова работает нормально, причина найдена. Если фильтр чист и вода всё равно не уходит, проблема может быть глубже (насос, шланги и т.д.).</p>`
    },
    {
      id: '2a',
      title: '2. Неплотно закрыт люк или неисправен замок',
      image: '/6/image%203823050-800h.webp',
      imageAlt: 'рука и дверца стиралки',
      imageCaption: 'Проверка замка дверцы',
      content: `<p>Если люк стиральной машины не закрылся до щелчка, автоматика не даст начать стирку или может прерваться в самом начале цикла. Проверьте, закрыта ли дверца плотно: она должна защёлкнуться с характерным звуком. Откройте и закройте люк заново, убедившись в «щелчке». Неплотно закрытый люк часто вызывает ошибку на панели и зависание программы.</p>
      <p>Если дверца плотно закрывается, но стирка всё равно не запускается или останавливается, возможно, сломан замок (устройство блокировки люка, УБЛ). Тогда люк визуально закрыт, но электроника его «не видит» — на дисплее может появиться ошибка. В такой ситуации неисправный УБЛ нужно заменить (обычно это работа мастера). Не пытайтесь открыть люк силой – предварительно отключите машину от сети и спустите воду через фильтр, чтобы безопасно добраться до замка.</p>`
    },
    {
      id: '2b',
      title: '3. Проблемы с отводом воды (насос, патрубок, шланг)',
      image: null,
      imageAlt: '',
      imageCaption: '',
      content: `<p>Насос и сливной шланг отвечают за отвод воды из машины. Проверьте сливной шланг: при сильном перегибе или засоре вода плохо уходит. Отключите шланг от канализации (или от задней части машины) и осмотрите его – при засоре рукав может «раздуться», быть забит грязью или мелкими предметами. Расправьте шланг, прочистите или замените его новым при необходимости.</p>`
    },
    {
      id: '2c',
      title: '4. Сбой электронного модуля управления',
      image: '/1/plata.webp',
      imageAlt: 'модуль управления',
      imageCaption: 'Модуль управления',
      content: `<p>Блок управления (электронная плата) — «мозг» стиральной машины, который управляет всеми узлами. При скачке напряжения или сбоя электроники программа может зависнуть или не реагировать на кнопки. Обычно это называется «разовым сбоем модуля». Перезагрузите машину: выдерните вилку из розетки на 10–15 минут, затем включите вновь. Если сбой был единичным, после паузы машина начнет работать. Если же проблема повторяется (программа регулярно зависает, гаснет подсветка, на табло появляются странные символы), нужна диагностика платы. Повреждения в модуле управления устранить сложно — чаще всего его перепрошивают или заменяют. Без опыта ремонтов электроники не стоит разбирать плату самому.</p>`
    },
    {
      id: '2d',
      title: '5. Проблемы с датчиком уровня воды (прессостат)',
      image: '/2/presso.webp',
      imageAlt: 'Прессостат',
      imageCaption: 'Датчик уровня воды',
      content: `<p>Прессостат — это датчик, который определяет, сколько воды набрано в бак. Если он выходит из строя, блок управления «не знает», наполнен ли барабан водой. В результате машина может остановиться сразу после начала набора воды или не доливать воду вовсе. Признаки: при такой неисправности машинка может резко остановиться на этапе набора, стирки, полоскания или отжима (в зависимости от программы) и не продолжить цикл.</p>`
    },
    {
      id: '2e',
      title: '6. Неисправность ТЭНа (нагревательного элемента)',
      image: '/2/ten.webp',
      imageAlt: 'тэн',
      imageCaption: 'Нагревательный элемент (ТЭН)',
      content: `<p>ТЭН — это спираль, которая нагревает воду в баке. Если ТЭН не работает, вода не достигает нужной температуры, а блок управления бесконечно пытается её нагреть. Машина зависает: она набрала воду, но не греет её, пытаясь дотянуть до заданной температуры. Признаком неисправности ТЭНа является холодное стекло люка при выбранной горячей программе и возможная ошибка нагрева на дисплее.</p>`
    },
  ]

  return (
    <>
      <ProblemPageLayout
        seo={seo}
        title={title}
        anchors={anchors}
        navigation={navigation}
        onOrderClick={openModal}
      >
        {sectionsTop.map((s) => (<ProblemSection key={s.id} {...s} />))}
        <div className="page-container15"><h2 className="page-text34"><span>Другие возможные причины:</span></h2></div>
        {sectionsBottom.map((s) => (<ProblemSection key={s.id} {...s} />))}
      </ProblemPageLayout>

      <OrderModal isOpen={isModalOpen} onClose={closeModal} />
    </>
  )
}

export default Page
